---
import BaseLayout from "../layouts/BaseLayout.astro";
import { getCollection } from "astro:content";

const base = import.meta.env.BASE_URL;
const posts = (await getCollection("diary"))
  .filter(p => !p.data.draft)
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());

const latest = posts.slice(0, 3);
---

<BaseLayout>
  <header class="hero" id="top">
    <span class="kicker reveal"><span class="dot"></span> Minimal diary ‚Ä¢ Portfolio ‚Ä¢ Life in Finland</span>
    <h1 class="reveal">John in Vantaa.</h1>
    <p class="lead reveal">
      I live in <b>Vantaa, Finland</b>. This is my minimal corner of the internet:
      a quiet diary of everyday life here, plus the work I‚Äôm building along the way.
    </p>

    <div class="hero-grid">
      <div class="panel reveal">
        <div class="panel-pad">
          <h2 style="margin:0 0 6px;">About</h2>
          <p class="sub" style="margin:0; max-width: 72ch;">
            Replace this with 3‚Äì5 sentences that feel real: what brought you to Finland, what you do,
            and what you‚Äôre curious about right now. Keep it concrete (places, seasons, routines).
          </p>

          <div class="grid" style="margin-top:14px;">
            <div class="card" style="grid-column: span 12; box-shadow:none;">
              <b>Quick facts</b>
              <p>
                üìç Vantaa ‚Ä¢ üá´üáÆ Finland ‚Ä¢ ‚òï coffee walks ‚Ä¢ üå≤ forests ‚Ä¢ üîß building projects ‚Ä¢ ‚úçÔ∏è writing short notes
              </p>
            </div>
          </div>
        </div>
      </div>

      <div class="portrait reveal" role="img" aria-label="John portrait photo">
        <div class="badge">üìç Vantaa ‚Ä¢ since 20__</div>
      </div>
    </div>
  </header>

  <section id="index">
    <div class="section-head">
      <div>
        <h2 class="reveal">Index</h2>
        <p class="sub reveal">Start here ‚Äî the newest notes + the best pages.</p>
      </div>
    </div>

    <div class="grid">
      <div class="card reveal">
        <b>Site map</b>
        <div class="chiprow">
          <a class="btn" href={`${base}#diary`} style="text-decoration:none;">üìì Diary</a>
          <a class="btn" href={`${base}#projects`} style="text-decoration:none;">üß© Projects</a>
          <a class="btn" href={`${base}#photos`} style="text-decoration:none;">üì∑ Photos</a>
          <a class="btn" href={`${base}#now`} style="text-decoration:none;">üï∞Ô∏è Now</a>
          <a class="btn" href={`${base}#contact`} style="text-decoration:none;">‚úâÔ∏è Contact</a>
        </div>
        <p style="color:var(--muted2); margin-top:10px;">
          Keep the diary short. Let photos + projects do the heavy lifting.
        </p>
      </div>

      <div class="card reveal">
        <b>Latest diary entries</b>
        <p style="margin-top:10px; color:var(--muted);">These update automatically from your Markdown posts.</p>

        <div style="margin-top:10px; display:grid; gap:10px;">
          {latest.map((post) => (
            <a class="entry" href={`${base}posts/${post.id}/`} style="border-color:var(--border);">
              <div class="date">{post.data.pubDate.toISOString().slice(0,10)}</div>
              <div>
                <b>{post.data.title}</b>
                <span>{post.data.description}</span>
              </div>
            </a>
          ))}
        </div>

        <p style="margin-top:12px;">
          <a class="btn" href={`${base}posts/`} style="text-decoration:none;">View all posts ‚Üí</a>
        </p>
      </div>

      <div class="card reveal" style="grid-column: span 12;">
        <b>Featured</b>
        <p style="margin-top:8px; color:var(--muted);">
          If someone only looks at 3 things, make it these.
        </p>

        <div class="grid" style="margin-top:12px;">
          <div class="project reveal" style="grid-column: span 4;">
            <small>Project</small>
            <h3 style="margin:6px 0 6px;">Project name</h3>
            <div style="color:var(--muted);">One sentence + one outcome.</div>
          </div>

          <div class="project reveal" style="grid-column: span 4;">
            <small>Diary</small>
            <h3 style="margin:6px 0 6px;">Best post</h3>
            <div style="color:var(--muted);">The one you‚Äôd send a friend.</div>
          </div>

          <div class="project reveal" style="grid-column: span 4;">
            <small>Photos</small>
            <h3 style="margin:6px 0 6px;">Favorite set</h3>
            <div style="color:var(--muted);">A consistent look = premium.</div>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="diary">
    <div class="section-head">
      <div>
        <h2 class="reveal">Diary</h2>
        <p class="sub reveal">Short entries. Minimal. The point is consistency, not perfection.</p>
      </div>
    </div>

    <div class="grid">
      <div class="diary reveal">
        {posts.slice(0,6).map((post) => (
          <a class="entry" href={`${base}posts/${post.id}/`}>
            <div class="date">{post.data.pubDate.toISOString().slice(0,10)}</div>
            <div>
              <b>{post.data.title}</b>
              <span>{post.data.description}</span>
            </div>
          </a>
        ))}
      </div>

      <div class="card reveal">
        <b>Writing style (my rule)</b>
        <p>One scene, one detail, one takeaway. If it feels too long, it‚Äôs probably two posts.</p>
      </div>

      <div class="card reveal">
        <b>Topics I keep coming back to</b>
        <p>Seasons ‚Ä¢ routines ‚Ä¢ language learning ‚Ä¢ social rules ‚Ä¢ nature ‚Ä¢ work habits ‚Ä¢ tiny everyday wins.</p>
      </div>
    </div>
  </section>

  <section id="projects">
    <div class="section-head">
      <div>
        <h2 class="reveal">Projects</h2>
        <p class="sub reveal">A small portfolio ‚Äî only the work I‚Äôm proud to keep.</p>
      </div>
    </div>

    <div class="grid">
      <div class="project reveal">
        <small>Project</small>
        <h3 style="margin:6px 0 6px;">Project name</h3>
        <div style="color:var(--muted);">1‚Äì2 lines: what it is, who it‚Äôs for, and the result.</div>
      </div>
      <div class="project reveal">
        <small>Project</small>
        <h3 style="margin:6px 0 6px;">Project name</h3>
        <div style="color:var(--muted);">Add a link later. Keep it clean. Keep it specific.</div>
      </div>
      <div class="project reveal">
        <small>Project</small>
        <h3 style="margin:6px 0 6px;">Project name</h3>
        <div style="color:var(--muted);">What you built ‚Ä¢ tools used ‚Ä¢ impact.</div>
      </div>
    </div>
  </section>

  <section id="photos">
    <div class="section-head">
      <div>
        <h2 class="reveal">Photos</h2>
        <p class="sub reveal">A small set. Consistent edits. Strong mood.</p>
      </div>
    </div>

    <div class="gallery">
      <div class="shot reveal" data-full={`${base}photo1.jpg`} data-caption="Blue corridor mirror ‚Ä¢ small moment">
        <img src={`${base}photo1.jpg`} alt="Blue corridor mirror" />
        <div class="cap">Blue corridor mirror ‚Ä¢ small moment</div>
      </div>

      <div class="shot reveal" data-full={`${base}photo2.jpg`} data-caption="Beanie weather ‚Ä¢ winter mood">
        <img src={`${base}photo2.jpg`} alt="Portrait in beanie" />
        <div class="cap">Beanie weather ‚Ä¢ winter mood</div>
      </div>

      <div class="shot reveal" data-full={`${base}photo3.jpg`} data-caption="Me & my cat ‚Ä¢ calm day">
        <img src={`${base}photo3.jpg`} alt="John holding a cat" />
        <div class="cap">Me & my cat ‚Ä¢ calm day</div>
      </div>

      <div class="shot reveal" data-full={`${base}photo4.jpg`} data-caption="Golden eyes ‚Ä¢ best roommate">
        <img src={`${base}photo4.jpg`} alt="Cat close-up" />
        <div class="cap">Golden eyes ‚Ä¢ best roommate</div>
      </div>

      <div class="shot reveal" data-full={`${base}photo5.jpg`} data-caption="Hoodie day ‚Ä¢ everyday Finland">
        <img src={`${base}photo5.jpg`} alt="Close portrait in hoodie" />
        <div class="cap">Hoodie day ‚Ä¢ everyday Finland</div>
      </div>

      <div class="shot reveal" data-full={`${base}photo6.jpg`} data-caption="Soft light ‚Ä¢ quiet vibe">
        <img src={`${base}photo6.jpg`} alt="Portrait in soft light" />
        <div class="cap">Soft light ‚Ä¢ quiet vibe</div>
      </div>
    </div>
  </section>

  <section id="now">
    <div class="section-head">
      <div>
        <h2 class="reveal">Now</h2>
        <p class="sub reveal">Updated occasionally ‚Äî a simple ‚Äúwhere I‚Äôm at‚Äù snapshot.</p>
      </div>
    </div>

    <div class="grid">
      <div class="card reveal">
        <b>Current focus</b>
        <p>Work: ____ ‚Ä¢ Learning: ____ ‚Ä¢ Building: ____</p>
      </div>
      <div class="card reveal">
        <b>This season</b>
        <p>One goal that matters + one habit that supports it.</p>
      </div>
    </div>
  </section>

  <section id="contact">
    <div class="section-head">
      <div>
        <h2 class="reveal">Contact</h2>
        <p class="sub reveal">Keep it simple. One email + a couple links.</p>
      </div>
    </div>

    <div class="grid">
      <div class="card reveal">
        <b>Reach me</b>
        <p style="margin-top:6px;">Email: <a href="mailto:you@example.com">you@example.com</a></p>
        <p>Links: <a href="#">LinkedIn</a> ‚Ä¢ <a href="#">GitHub</a> ‚Ä¢ <a href="#">Instagram</a></p>
      </div>

      <div class="card reveal">
        <b>Message</b>
        <p style="margin-top:6px;">Connect this form to Formspree / Netlify Forms (replace the action URL).</p>
        <form action="#" method="post">
          <input name="name" placeholder="Your name" autocomplete="name" />
          <input name="email" placeholder="Your email" autocomplete="email" />
          <textarea name="message" placeholder="Your message"></textarea>
          <button class="btn primary" type="submit">Send</button>
        </form>
      </div>
    </div>

    <footer>
      <span>¬© <span data-year></span> John</span>
      <span>Minimal ‚Ä¢ Fast ‚Ä¢ Accessible</span>
    </footer>
  </section>
</BaseLayout>
